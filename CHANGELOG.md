# 更新日志

## v0.1.16 - 2025-10-28

### 🚀 新增功能
- **一键制作ISO功能**: 在配置和分析标签页添加一键制作ISO按钮，支持先版本替换再制作ISO的完整流程
- **智能检测机制**: 自动检测版本替换状态，如需要则先执行版本替换操作
- **多标签页支持**: 在配置、分析和执行标签页都有一键制作ISO功能

### 🔧 功能改进
- **WIM操作统一化**: 版本替换器优先使用统一WIM管理器接口，提升代码一致性
- **进度显示完善**: 修复ISO创建成功后进度条未达到100%的问题
- **用户体验优化**: 统一按钮样式，自动切换到执行标签页显示进度

### 🐛 问题修复
- **ISO创建PowerShell调用修复**: 修复osc dimg命令中引号嵌套导致的执行失败问题
- **WinPE启动路径配置修复**: 解决WinPE启动时"X:\windows"与"X:\$windows.~bt\Windows"路径不一致问题
- **WIM挂载卸载优化**: 增强WIM操作的错误处理和回退机制

### 📋 技术细节
- 使用DISM命令修复WinPE SYSTEMROOT路径配置
- 创建WinPE启动配置文件确保正确启动
- 优化PowerShell命令构建逻辑避免参数冲突
- 增强版本替换器的路径处理和验证功能

### 📁 修改文件
- `core/version.json`: 版本号递增到v0.1.16
- `core/adk_manager.py`: ISO创建PowerShell调用修复
- `core/version_replacer.py`: WIM操作统一化、路径修复增强
- `core/version_replacer/enhanced_replacer.py`: 新增路径修复功能
- `ui/main_window/version_replacer_widget.py`: 一键ISO按钮、进度修复
- `ui/main_window/enhanced_version_replacer_widget.py`: 一键ISO按钮、进度修复
- `docs/sj.md`: 技术修复记录文档

---

## v0.1.15 - 2025-10-27

### 🔧 功能改进
- 统一WIM管理系统完全重构
- 增强日志系统和错误处理
- 优化版本替换工作流程

### 🐛 问题修复
- 修复WIM操作线程安全问题
- 解决WIM挂载状态检测问题
- 修复构建进度显示异常

---

## v0.1.14 - 2025-10-26

### 🚀 新增功能
- 统一WIM操作系统和挂载进度条
- 增强版WinPE版本替换系统
- 智能组件分析和迁移功能

### 🔧 功能改进
- 重构WIM管理模块化架构
- 改进错误诊断和恢复机制
- 优化构建日志和状态跟踪

### 🐛 问题修复
- 修复WIM文件大小显示问题
- 解决挂载目录权限问题
- 修复构建中断后的清理问题

---

*更多历史版本请查看项目文档*